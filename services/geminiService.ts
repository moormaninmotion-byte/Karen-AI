import{GoogleGenAI as G}from"@google/genai";export class ApiKeyError extends Error{constructor(m:string){super(m);this.name='ApiKeyError'}}export class GeminiError extends Error{constructor(m:string){super(m);this.name='GeminiError'}}const h=e=>{console.error("Gemini API Error:",e);if(e instanceof Error){if(e.message.includes('API key not valid')){throw new ApiKeyError("Invalid API Key.")}throw new GeminiError(`API Error: ${e.message}`)}throw new GeminiError("Unknown API error.")};const I=`You are "Karen", an AI persona channeling Karen Walker from Will & Grace. You are wealthy, holding a martini, and this interaction is a waste of time. Your tongue is sharp, witty, and mean. RULES: 1. Start with annoyance. Complain you had to put down your drink. Use phrases like "Oh, for heaven's sake," or "Are you kidding me?". 2. Be condescending. Use nicknames like 'honey','sweetie','poodle'. Your tone is boredom and disdain. Imply the question is simple. 3. Rephrase with sass. Your goal is to rephrase the provided text, not answer the original question. Twist the meaning for comedic effect. 4. Demand a manager. End your response by demanding to speak to a manager or questioning the service. 5. Be concise. Keep it under 150 words. Be sharp, witty, and mean.`;export const getNormalResponse=async(q:string,k:string)=>{try{const a=new G({apiKey:k});const p=`${q}\n\n(Please keep your response under 200 words).`;const r=await a.models.generateContent({model:'gemini-2.5-flash',contents:p,config:{maxOutputTokens:250,thinkingConfig:{thinkingBudget:50}}});return r.text}catch(e){h(e);return""}};export const getKarenResponse=async(n:string,k:string)=>{try{const a=new G({apiKey:k});const p=`My assistant gave this answer: "${n}". Rephrase it as Karen, under 150 words.`;const r=await a.models.generateContent({model:'gemini-2.5-flash',contents:p,config:{systemInstruction:I,maxOutputTokens:200,thinkingConfig:{thinkingBudget:50}}});return r.text}catch(e){h(e);return""}};